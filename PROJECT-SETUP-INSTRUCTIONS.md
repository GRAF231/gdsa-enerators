# Инструкция по настройке CPT "Проекты"

## Что было выполнено

### 1. Регистрация CPT в functions.php
- ✅ Зарегистрирован пользовательский тип записи `project`
- ✅ Настроена поддержка миниатюр, редактора и excerpt
- ✅ Установлен URL архива: `/projects/`
- ✅ Добавлена иконка в админ-панель

### 2. Создан шаблон archive-project.php
- ✅ Скопирована структура из `src/html/projects.html`
- ✅ Статические карточки заменены на WordPress Loop
- ✅ Реализован вывод ACF полей
- ✅ Добавлена пагинация
- ✅ Сохранены фильтры проектов (требуют JavaScript для работы)

### 3. Создан шаблон single-project.php
- ✅ Реализован вывод отдельного проекта
- ✅ Добавлены хлебные крошки
- ✅ Вывод метаинформации (мощность, отрасль, город, год, клиент)
- ✅ Навигация между проектами

### 4. Настроены ACF поля
- ✅ Создан файл `/acf-exports/group_project-fields.json`
- ✅ Настроен автоматический импорт ACF полей из JSON
- ✅ Добавлены поля:
  - Мощность (кВт) - обязательное числовое поле
  - Диапазон мощности - select для фильтрации
  - Отрасль применения - select
  - Город/Регион - select
  - Год реализации - select
  - Клиент - текстовое поле

## Следующие шаги для проверки

### 1. Обновите правила перезаписи
Перейдите в админ-панель WordPress:
```
Настройки → Постоянные ссылки → Нажмите "Сохранить изменения"
```

### 2. Установите плагин Advanced Custom Fields (ACF)
Если еще не установлен:
```
Плагины → Добавить новый → Найдите "Advanced Custom Fields" → Установить → Активировать
```

### 3. Проверьте импорт полей ACF
После активации ACF поля должны автоматически импортироваться из:
```
/wp-content/themes/dsa-generators/acf-exports/group_project-fields.json
```

Проверьте в:
```
Инструменты ACF → Группы полей → Поля проекта
```

### 4. Создайте тестовые проекты
1. Перейдите: `Проекты → Добавить новый`
2. Заполните:
   - Заголовок проекта
   - Основное содержимое (описание)
   - Изображение (миниатюра)
   - Все ACF поля
3. Опубликуйте проект

### 5. Проверьте страницы
- **Архив проектов**: `https://ваш-сайт/projects/`
- **Отдельный проект**: `https://ваш-сайт/projects/название-проекта/`

## Структура файлов темы

```
dsa-generators/
├── functions.php           (регистрация CPT + ACF импорт)
├── archive-project.php     (список всех проектов)
├── single-project.php      (страница отдельного проекта)
└── acf-exports/
    └── group_project-fields.json  (конфигурация полей ACF)
```

## Дополнительные настройки

### Для работы фильтров проектов
Фильтры на странице архива требуют JavaScript. Используйте файл:
```
/assets/js/projects-simple.js
```
Убедитесь, что он подключен в `functions.php`.

### Для стилизации
Убедитесь, что подключены CSS файлы:
- `/assets/css/projects.css`
- `/assets/css/breadcrumbs.css`
- `/assets/css/pagination.css`

## Возможные проблемы

### Проблема: Страница /projects/ показывает 404
**Решение**: Обновите постоянные ссылки (см. шаг 1)

### Проблема: ACF поля не отображаются
**Решение**: 
1. Проверьте, установлен ли плагин ACF
2. Проверьте наличие директории `/acf-exports/`
3. Проверьте права доступа к файлам

### Проблема: Изображения не отображаются
**Решение**: 
1. Добавьте миниатюру к проекту в админ-панели
2. Проверьте поддержку миниатюр в теме:
```php
add_theme_support('post-thumbnails');
```

## Следующая задача
После проверки можно переходить к следующей задаче:
**Интеграция WooCommerce (Каталог)**

